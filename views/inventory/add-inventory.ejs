<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %> | CSE Motors</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/inventory.css">
</head>
<body>
    <main>
        <div class="content-container form-container">
            <h1><%= title %></h1>

            <%# Display flash messages %>
            <%- messages() %>

            <% if (errors && errors.array) { %>
                <ul class="notice">
                    <% errors.array().forEach(error => { %>
                        <li><%= error.msg %></li>
                    <% }) %>
                </ul>
            <% } %>

            <p class="required-note">Fields marked with * are required.</p>

            <form action="/inv/add-inventory" method="post" id="addInventoryForm">
                
                <label for="classificationList">Classification *</label>
                <%# The classificationList variable is generated in the utility file %>
                <%- classificationList %>

                <label for="invMake">Make *</label>
                <input 
                    type="text" 
                    id="invMake" 
                    name="inv_make" 
                    required 
                    minlength="3"
                    value="<%= locals.inv_make || '' %>"
                >

                <label for="invModel">Model *</label>
                <input 
                    type="text" 
                    id="invModel" 
                    name="inv_model" 
                    required 
                    minlength="3"
                    value="<%= locals.inv_model || '' %>"
                >

                <label for="invYear">Year (YYYY) *</label>
                <input 
                    type="number" 
                    id="invYear" 
                    name="inv_year" 
                    required 
                    min="1900" 
                    max="9999"
                    value="<%= locals.inv_year || '' %>"
                >

                <label for="invDescription">Description *</label>
                <textarea 
                    id="invDescription" 
                    name="inv_description" 
                    required
                ><%= locals.inv_description || '' %></textarea>

                <label for="invImage">Image Path (e.g., /images/vehicles/no-image.png) *</label>
                <input 
                    type="text" 
                    id="invImage" 
                    name="inv_image" 
                    required
                    value="<%= locals.inv_image || '/images/vehicles/no-image.png' %>"
                >

                <label for="invThumbnail">Thumbnail Path (e.g., /images/vehicles/no-image-tn.png) *</label>
                <input 
                    type="text" 
                    id="invThumbnail" 
                    name="inv_thumbnail" 
                    required
                    value="<%= locals.inv_thumbnail || '/images/vehicles/no-image-tn.png' %>"
                >

                <label for="invPrice">Price ($) *</label>
                <input 
                    type="number" 
                    id="invPrice" 
                    name="inv_price" 
                    required 
                    step="0.01" 
                    min="0"
                    value="<%= locals.inv_price || '' %>"
                >

                <label for="invMiles">Mileage *</label>
                <input 
                    type="number" 
                    id="invMiles" 
                    name="inv_miles" 
                    required 
                    min="0"
                    value="<%= locals.inv_miles || '' %>"
                >

                <label for="invColor">Color *</label>
                <input 
                    type="text" 
                    id="invColor" 
                    name="inv_color" 
                    required 
                    pattern="[A-Za-z]+"
                    title="Color must contain only letters."
                    value="<%= locals.inv_color || '' %>"
                >

                <button type="submit" class="submit-button">Add Vehicle</button>
            </form>
        </div>
    </main>
</body>
</html>